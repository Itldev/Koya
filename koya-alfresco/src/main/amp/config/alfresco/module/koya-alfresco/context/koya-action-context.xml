<?xml version='1.0' encoding='UTF-8'?>
<!--

    Koya is an alfresco module that provides a corporate orientated dataroom.

    Copyright (C) Itl Developpement 2014

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU Affero General Public License as
    published by the Free Software Foundation, either version 3 of the
    License, or (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU Affero General Public License for more details.

    You should have received a copy of the GNU Affero General Public License
    along with this program.  If not, see `<http://www.gnu.org/licenses/>`.

-->

<!DOCTYPE beans PUBLIC '-//SPRING//DTD BEAN//EN' 'http://www.springframework.org/dtd/spring-beans.dtd'>
<beans>
    
    <bean id="cleanPermissions" class="fr.itldev.koya.action.CleanUserPermissionsActionExecuter" parent="action-executer">
        <property name="nodeService" ref="NodeService"/>
        <property name="permissionService" ref="permissionService" />
        <property name="searchService" ref="SearchService" />
    </bean>

    <bean id="koyaDossierImport" class ="fr.itldev.koya.action.DossierImportActionExecuter" parent="action-executer">
        <property name="siteService" ref="siteService" />
        <property name="nodeService" ref="nodeService" />
        <property name="contentService" ref="contentService" />
        <property name="dossierService" ref="dossierService" />
        <property name="userService" ref="userService" />
        <property name="subSpaceCollaboratorsAclService" ref="SubSpaceCollaboratorsAclService" />
        <property name="koyaNodeService" ref="koyaNodeService" />
        <property name="koyaContentService" ref="koyaContentService" />
        <property name="authenticationService" ref="authenticationService" />
        <property name="defaultZipCharset" >
            <value>${koya.zip.defaultcharset}</value>
        </property>
        <property name="failoverZipCharset" value="${koya.zip.failovercharset}" />
        <property name="policyBehaviourFilter" ref="policyBehaviourFilter" />

    </bean>
    
    <bean id="koyaUnzip" class="fr.itldev.koya.action.UnzipActionExecuter">
        <property name="nodeService" ref="nodeService" />
        <property name="contentService" ref="contentService" />
        <property name="koyaContentService" ref="koyaContentService" />
        <property name="namespaceService" ref="namespaceService"/>
        <property name="defaultZipCharset" >
            <value>${koya.zip.defaultcharset}</value>
        </property>   
        <property name="failoverZipCharset" value="${koya.zip.failovercharset}" />
        <property name="dossierService" ref="dossierService" />
        <property name="policyBehaviourFilter" ref="policyBehaviourFilter" />
    </bean>

    
    <!--Koya notifications actions Actions--> 
    
    
    <bean id="koyaNotifier" abstract="true" class="fr.itldev.koya.action.notification.KoyaNotifierActionExecuter">
        <property name="koyaNotificationService" ref="koyaNotificationService"/>        
    </bean>
    
    <bean id="newContentNotifier" class="fr.itldev.koya.action.notification.NewContentNotifierActionExecuter" parent="koyaNotifier">
        <property name="koyaMailService" ref="koyaMailService"/>        
        <property name="koyaNodeService" ref="koyaNodeService"/>        
        <property name="nodeService" ref="NodeService"/>        
        <property name="companyAclService" ref="companyAclService"/> 
        <property name="subSpaceAclService" ref="subSpaceAclService"/>        
    </bean>
    
    
    <bean id="afterValidateInvitePostActivity" 
          class="fr.itldev.koya.action.notification.AfterValidateInvitePostActivityActionExecuter" 
          parent="koyaNotifier">
        <property name="spaceService" ref="spaceService"/>        
        <property name="dossierService" ref="dossierService"/>        
        <property name="koyaNodeService" ref="koyaNodeService"/>        
        <property name="activityService" ref="activityService"/> 
        <property name="userService" ref="userService"/>                
        <property name="authenticationService" ref="AuthenticationService"/>        
    </bean>
</beans>
